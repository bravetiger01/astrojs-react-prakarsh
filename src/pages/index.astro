---
import Mobile from "../components/Mobile.astro";
import Layout from "../layouts/Layout.astro";
import MobileLayout from "../layouts/MobileLayout.astro";

/* Read headers (works on Vercel SSR) */
const ua = Astro.request.headers.get("user-agent") ?? "";

/* Simple, safe UA check */
const isMobile =
  /Android|iPhone|iPod/i.test(ua) ||
  (/iPad/i.test(ua) && !/Macintosh/i.test(ua));

// Server-side logs
console.log("üîç [SERVER] index.astro - isMobile:", isMobile);
---

{
  isMobile ? (
    <MobileLayout>
      <Mobile />
    </MobileLayout>
  ) : (
    <Layout>
      <Mobile />
    </Layout>
  )
}
