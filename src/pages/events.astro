---
import PageLayout from "../layouts/PageLayout.astro";
import UnifiedEventsPage from "../components/UnifiedEventsPage";
import { getCachedEventsByCategory } from "../lib/event-cache";

// Fetch events by category from Supabase
const technicalEvents = await getCachedEventsByCategory("tech");
const nonTechnicalEvents = await getCachedEventsByCategory("non-tech");
const workshopEvents = await getCachedEventsByCategory("workshops");
const esportsEvents = await getCachedEventsByCategory("esports");
---

<PageLayout title="Events - Prakarsh '26">
  <UnifiedEventsPage
    client:load
    technicalEvents={technicalEvents}
    nonTechnicalEvents={nonTechnicalEvents}
    workshopEvents={workshopEvents}
    esportsEvents={esportsEvents}
  />
</PageLayout>
