---
import Layout from "../../layouts/Layout.astro";
import EventPage from "../../components/EventPage";
import ConsoleEventDetailPage from "../../components/ConsoleEventDetailPage";
import EsportsEventDetailPage from "../../components/EsportsEventDetailPage";

// For static build, we need to generate paths for all events
import { technicalEvents } from "../../data/technical_events";
import { nonTechnicalEvents } from "../../data/non_technical";
import { workshopEvents } from "../../data/workshops";
import { esportsEvents } from "../../data/esports";

export function getStaticPaths() {
  const allLocalEvents = [
    ...technicalEvents,
    ...nonTechnicalEvents,
    ...workshopEvents,
    ...esportsEvents,
  ];

  return allLocalEvents.map((event) => ({
    params: { id: event.id },
    props: { category: event.category },
  }));
}

const { id } = Astro.params;
const { category } = Astro.props;
---

<Layout title="Event Details - Prakarsh '26">
  {category === "esports" && <EsportsEventDetailPage client:load eventId={id} />}
  {(category === "non-tech" || category === "workshops") && <ConsoleEventDetailPage client:load eventId={id} />}
  {category === "tech" && <EventPage client:load eventId={id} />}
</Layout>
